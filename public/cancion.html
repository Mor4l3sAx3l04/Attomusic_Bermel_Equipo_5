<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Detalle de Canci√≥n - AttoMusic</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="content container">
    <div id="track-details"></div>
    <div id="calificar-section">
      <h3>Califica esta canci√≥n</h3>
      <form id="calificar-form">
        <label for="calificacion">Tu calificaci√≥n (1-5):</label>
        <input type="number" id="calificacion" name="calificacion" min="1" max="5" required>
        <button type="submit" class="btn btn-primary">Enviar</button>
      </form>
      <div id="calificacion-result"></div>
    </div>
  </div>
  <script>
    async function cargarCancion() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");
      if (!id) {
        document.getElementById("track-details").innerHTML = "<p>No se especific√≥ canci√≥n.</p>";
        return;
      }
      const res = await fetch(`https://attomusic.onrender.com/track/${id}`);
      const track = await res.json();
      let img = track.album?.images?.[0]?.url || "";
      document.getElementById("track-details").innerHTML = `
        <div">
          <h2>${track.name}</h2>
          ${img ? `<img src="${img}" alt="cover">` : ""}
          <p>üë©‚Äçüé§ ${track.artists.map(a => a.name).join(", ")}</p>
          <p>üíø √Ålbum: ${track.album?.name || ""}</p>
          <p>üìÖ ${track.album?.release_date || ""}</p>
          <p>üî• Popularidad: ${track.popularity}</p>
        </div>
      `;
    }
    cargarCancion();
    document.getElementById("calificar-form").addEventListener("submit", function(e) {
      e.preventDefault();
      const val = document.getElementById("calificacion").value;
      document.getElementById("calificacion-result").innerHTML = `<p>¬°Gracias! Calificaste esta canci√≥n con <b>${val}</b> estrellas.</p>`;
    });
  </script>
</body>
</html>
